<div  class="text-center preloader" ng-show="loader">

	<span><img src="loading.gif" width="90px" height="90px" />  Loading...</span>

</div>
<style>
    .left {
        position: absolute;
        left: -40px;
        top: 40%;
        color: white;
        font-size: 50px;
    }
    .right {
        position: absolute;
        right: -135px;
        top: 40%;
        color: white;
        font-size: 50px;
    }
</style>
<div id="content">
	<div class="col-md-12">
		<div class="panel panel-default">
			<div class="panel-body" >
				<div ng-show="reviews != []">
					<div class="col-md-12">
						<div class="form-inline pull-left">
						    <a ui-sref = "admin.reviewproducts" class="btn btn-primary" ><- back</a>
							<button class="btn btn-primary" ng-click="refetchAllReviews()"><i class="fa fa-plus"></i>Re-Fetch All Reviews</button>
						</div>
						<div class="form-inline pull-right">
							<button class="btn btn-primary" ng-click="exportAllReviews(reviews[0].product_asin)"><i class="fa fa-plus"></i>Export Reviews</button>
						</div>
						<!--<div class="form-inline pull-right" ng-hide="pagination.total == 0">
							<input type="text" class="form-control" placeholder="Search" ng-model="query" ng-keypress="($event.which === 13)?search(perPage):0">
							<button type="button" class="btn btn-primary" ng-click="search(perPage)">Search</button>
							<button type="button" class="btn btn-primary" ng-click="refresh()">Reset Filter</button>
						</div>-->
					</div>
				</div>
			</div>
			<div class="panel-body">
				<div class="res-table">         
					<table class="table table-bordered table-hover" ng-if="reviews != []">
						<thead>
							<tr>
								<th width="10%" style="text-align:center;">
								</th>
								<th width="35%">Review Title</th>
								<th width="10%">Review Date</th>
								<th width="5%">Rating</th>
								<th width="10%">Status</th>
								<th width="15%">Action</th> 
							</tr>
						</thead>
						<tbody ng-repeat="(key,review) in reviews">
							<tr> 
								<td style="text-align:center;">
									
										<!--<input id="{{review.id}}" type="checkbox" class="conchkNumber" value="{{review.title}}" ng-checked="selection.indexOf(review.id) > -1" ng-click="toggleSelection(review.id)" ng-model="review.Selected" >
										<label for="{{review.id}}"></label>-->
										<span ng-if="review.imgArr != ''"><span ng-repeat="img in splitArr(review.imgArr)"><img ng-click="splitArrA(review.imgArr)" data-toggle="modal" data-target="#imgList" ng-src="{{img}}" alt="avatar" style="max-height: 80px!important;cursor: pointer;" height="80px" width="80px" class="img-circle img-responsive" fallback-src="{{'../assets/img/broken/broken-link-250x250.png'}}"></span></span>
									<div id="imgList" class="modal fade" role="dialog" style="top: 2%;">
                                    	<div class="modal-dialog">
                                    		<div class="modal-body">
                                    		    <div class="left" ng-click="left()">
                        							<i class="fa fa-chevron-circle-left" aria-hidden="true"></i>
                        						</div>
                                    		      <img ng-src="{{images[i]}}" alt="avatar" height="500px" fallback-src="{{'../assets/img/broken/broken-link-250x250.png'}}">
                                    		    <div class="right" ng-click="right()">
                        							<i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
                        						</div>
                                    		</div>
                                    	</div>
                                    </div>
								</td>
								<td>{{review.reviewTitle}}<!--<strong>ASIN: {{review.product_asin}}</strong>--></td>
								<td><span >{{review.reviewDate}}</span></td>
								<td>{{review.rating}}</td>
								<td>{{review.status}}</td>
								<td>
									<div class="btn-group">
										<button class="btn btn-primary dropdown-toggle has-ripple" data-toggle="dropdown" aria-expanded="false">Action<span class="caret"></span><span class="ripple ripple-animate" style="height: 78px; width: 78px; animation-duration: 0.4s; animation-timing-function: linear; background: rgb(255, 255, 255); opacity: 0.2; top: -21px; left: -6px;"></span></button>
										<ul class="dropdown-menu">
											<li>
												<a href="{{ review.variants.detail_page_url }}" target="_blank">View on Amazon</a>
											</li>
											<li>
												<a href="" ng-if="review.status != 'published'" ng-click="publish([review.product_asin,review.id])">Publish</a>
												<a href="" ng-if="review.status != 'unpublished'" ng-click="unpublish([review.product_asin,review.id])">Unpublish</a>
											</li>
											<li>
												<a ui-sref="admin.editReview({id:review.id})">Edit</a>
											</li>
											<li class="divider"></li>
											<li>
												<a ng-click = "destroy(review.product_asin,review.id)" style = "cursor:pointer;">Delete review</a>
											</li>
										</ul>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
					<div ng-show="pagination.total == 0">
						<h1 style="text-align:center;">No Reviews found.</h1>
					</div>
					<div ng-if="reviews != []">                      
						<div class="col-sm-12" ng-hide = "(pagination.total == 0)">
							<div class="col-sm-4 panel-body">
								Showing {{start}} to {{end}} of {{pagination.total}} entries
							</div>
							<div class=" col-sm-3 panel-body">
								<div class="display-flex">
									Show&nbsp;<select ng-model="perPage" ng-change="pageChanged(perPage)" ng-options="opt as opt.label for opt in units" class="form-control inline col-md-2" style="margin-top:-7px;"></select>&nbsp;entries
								</div>
							</div>
							<div class="col-sm-5"> 
								<uib-pagination ng-show="pagination.total>10" total-items="pagination.total" ng-model="pagination.current_page" max-size="maxSize" class="pagination pull-right" boundary-links="true" rotate="false" ng-change="pageChanged(perPage)" items-per-page="pagination.per_page" style="margin:0px;"></uib-pagination>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>